const books = [];
function initPage() {
    const searchTerm = document.getElementById("searchTerm");
    const searchEl = document.getElementById("submit");
    let table = document.getElementById("data");
    var table1 = document.getElementById("table1");
    
    
    searchEl.addEventListener("click", function () {
    console.log(searchTerm.value);
    fetchBooks();
    })
    }
    initPage();
    
    // fetch('https://www.googleapis.com/books/v1/volumes?q='+ searchTerm).then(function(response){
    //     return response.json();
    // })
    // .then(function(data){
    //     console.log(data)
    // });
    
   

    function fetchBooks(){
        
        fetch('https://www.googleapis.com/books/v1/volumes?q='+ searchTerm.value).then(function(response){
            return response.json();
        })
        .then(function(data){
            console.log(data);
            books.push(...data.items);
            for (var i = 0; i < books.length; i++) {
                var book = books[i];
                //console.log(book);
                var row = table1.insertRow(-1); // -1 to append at end of table
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
                var cell4 = row.insertCell(3);
                cell1.innerHTML = book.volumeInfo.title;
                cell2.innerHTML = book.volumeInfo.publisher;
                cell3.innerHTML = book.volumeInfo.imageLinks.thumbnail;
                cell4.innerHTML = book.volumeInfo.previewLink;
              }
            });

    }